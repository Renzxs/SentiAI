# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

"""User schema for authentication and profile"""
type User {
  id: ID!
  name: String!
  email: String!
  phone: String
  avatar: String
  googleId: String
  isAdmin: Boolean!

  """Created at"""
  createdAt: DateTime!

  """Updated at"""
  updatedAt: DateTime!
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

"""Session schema for authentication and profile"""
type Session {
  id: ID!
  userId: String!
  title: String!
  description: String

  """Last message at"""
  lastMessageAt: DateTime

  """Created at"""
  createdAt: DateTime!

  """Updated at"""
  updatedAt: DateTime!
}

"""Chat message schema"""
type Message {
  id: ID!
  role: MessageRole!
  content: String

  """Whether message is liked"""
  isLiked: Boolean!
  sessionId: ID!
  model: String!
  userId: ID!

  """Created at"""
  createdAt: DateTime!

  """Updated at"""
  updatedAt: DateTime!
}

"""Role of the message sender"""
enum MessageRole {
  USER
  SYSTEM
  ASSISTANT
}

type Query {
  hello: String!
  getGithubAuthUrl: String!
  getUser: User
  sessions: [Session!]!
  session(id: String!): Session!
  getMessages(sessionId: String!): [Message!]
}

type Mutation {
  createSession(createSessionDto: CreateSessionDto!): Session!
  createMessage(createMessageDto: CreateMessageDto!): Message!
}

input CreateSessionDto {
  title: String!
  description: String
}

input CreateMessageDto {
  sessionId: ID!
  content: String!
  model: String!
}